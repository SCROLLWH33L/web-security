from web_security_academy.core.logger import logger
from urllib.parse import urlencode


def solve_lab(session):
    params = {"productId": "a"}
    logger.info(f'Visiting "{session.url}product?{urlencode(params)}"')
    resp = session.get_path("/product", params=params)
    logger.success(f"URL came back with the following text:\n{resp.text}")

    # Last line of response
    version = resp.text.split("\n")[-1]
    session.submit_solution(version)
